CREATE TABLE users(
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
username VARCHAR(50) NOT NULL CHECK(LENGTH(username)>=3),
email VARCHAR(100) NOT NULL,
password VARCHAR(200) NOT NULL CHECK(LENGTH(password)>=8),
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
CONSTRAINT uq_users_email UNIQUE(email)
);

CREATE TABLE projects(
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR(50) NOT NULL CHECK(LENGTH(name) >=3 AND LENGTH(name) <= 50),
description VARCHAR(1000),
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
owner_id BIGINT NOT NULL,
CONSTRAINT fk_projects_users FOREIGN KEY(owner_id) REFERENCES users(id)
);

CREATE TABLE tasks(
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
title VARCHAR(100) NOT NULL CHECK(LENGTH(title) >=3 AND LENGTH(title)<=100),
description VARCHAR(2000),
status VARCHAR(20) NOT NULL,
priority VARCHAR(20) NOT NULL,
due_date DATE,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
project_id BIGINT NOT NULL,
assignee_id BIGINT NOT NULL,
CONSTRAINT fk_tasks_projects FOREIGN KEY(project_id) REFERENCES projects(id),
CONSTRAINT fk_tasks_users FOREIGN KEY(assignee_id) REFERENCES users(id)
);


